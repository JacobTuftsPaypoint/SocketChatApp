{"ast":null,"code":"var _jsxFileName = \"/Users/ismailkhalil/Desktop/ahmed-work/SocketChatApp/src/Components/MainPage/loginButton.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { getDoc, doc } from 'firebase/firestore/lite';\nimport { app, db } from '../LoginPage/LoginMain';\nimport { getAuth, onAuthStateChanged, signOut } from \"firebase/auth\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst auth = getAuth(app);\nexport function LoginButton() {\n  _s();\n  const [username, setUsername] = useState();\n  const [user] = useAuthState(auth);\n  async function getUser(email) {\n    const docRef = doc(db, \"Users\", `${email}`);\n    const docSnap = await getDoc(docRef);\n    const snapRef = docSnap.data();\n    //console.log(docSnap.data())\n    return snapRef;\n  }\n  useEffect(() => {\n    onAuthStateChanged(auth, async userCredential => {\n      if (userCredential) {\n        const emailRef = userCredential.email;\n        const name2 = await getUser(emailRef);\n        setTimeout(async () => {\n          console.log(\"Loading\");\n          setUsername(await getUser(emailRef).then(u => {\n            return u.Username;\n          }).catch(error => {\n            console.log(error);\n          }));\n        }, 300);\n        setUsername(name2.Username);\n      }\n    });\n  });\n  if (user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"log-in-btn\",\n        children: [\" Account: \", username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"log-out-btn\",\n        onClick: () => auth.signOut(),\n        children: /*#__PURE__*/_jsxDEV(NavLink, {\n          to: \"/\",\n          children: \"Sign Out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 72\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"log-in-btn\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(NavLink, {\n        to: \"/login\",\n        children: \"Log in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 41\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }, this);\n  }\n}\n_s(LoginButton, \"EkK8+W52mBJkTQ1R3kacGBq5ga4=\", false, function () {\n  return [useAuthState];\n});\n_c = LoginButton;\nvar _c;\n$RefreshReg$(_c, \"LoginButton\");","map":{"version":3,"names":["React","useState","useEffect","NavLink","getDoc","doc","app","db","getAuth","onAuthStateChanged","signOut","useAuthState","auth","LoginButton","username","setUsername","user","getUser","email","docRef","docSnap","snapRef","data","userCredential","emailRef","name2","setTimeout","console","log","then","u","Username","catch","error"],"sources":["/Users/ismailkhalil/Desktop/ahmed-work/SocketChatApp/src/Components/MainPage/loginButton.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {  NavLink } from \"react-router-dom\";\nimport { getDoc, doc } from 'firebase/firestore/lite'\nimport { app, db } from '../LoginPage/LoginMain'\nimport { getAuth, onAuthStateChanged, signOut } from \"firebase/auth\"\nimport { useAuthState } from \"react-firebase-hooks/auth\"\n\nconst auth = getAuth(app)\n\nexport function LoginButton() {\n\n    const [username, setUsername] = useState()\n    const [user] = useAuthState(auth)\n\n    async function getUser(email) {\n        const docRef = doc(db, \"Users\", `${email}`)\n        const docSnap = await getDoc(docRef)\n        const snapRef = docSnap.data()\n        //console.log(docSnap.data())\n        return snapRef\n    }\n\n    useEffect(() => {\n        onAuthStateChanged(auth, async (userCredential) => {\n            if(userCredential) {\n                const emailRef = userCredential.email\n                const name2 = await getUser(emailRef)\n                setTimeout( async ()=> {\n                    console.log(\"Loading\")\n                    setUsername(await getUser(emailRef).then((u) => {return (u.Username)}).catch((error) => {console.log(error)}))\n                }, 300)\n                setUsername(name2.Username)\n                \n\n            }\n        })\n    })\n\n    if(user) {\n    return (\n        <div>\n        <button className=\"log-in-btn\"> Account: {username}</button>\n        <button className=\"log-out-btn\" onClick={() => auth.signOut()}><NavLink to=\"/\">Sign Out</NavLink></button>\n        </div>\n    )\n    } else {\n    return(\n        <button className=\"log-in-btn\"> <NavLink to='/login'>Log in</NavLink> </button>\n    )\n    }\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAAUC,OAAO,QAAQ,kBAAkB;AAC3C,SAASC,MAAM,EAAEC,GAAG,QAAQ,yBAAyB;AACrD,SAASC,GAAG,EAAEC,EAAE,QAAQ,wBAAwB;AAChD,SAASC,OAAO,EAAEC,kBAAkB,EAAEC,OAAO,QAAQ,eAAe;AACpE,SAASC,YAAY,QAAQ,2BAA2B;AAAA;AAExD,MAAMC,IAAI,GAAGJ,OAAO,CAACF,GAAG,CAAC;AAEzB,OAAO,SAASO,WAAW,GAAG;EAAA;EAE1B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,EAAE;EAC1C,MAAM,CAACe,IAAI,CAAC,GAAGL,YAAY,CAACC,IAAI,CAAC;EAEjC,eAAeK,OAAO,CAACC,KAAK,EAAE;IAC1B,MAAMC,MAAM,GAAGd,GAAG,CAACE,EAAE,EAAE,OAAO,EAAG,GAAEW,KAAM,EAAC,CAAC;IAC3C,MAAME,OAAO,GAAG,MAAMhB,MAAM,CAACe,MAAM,CAAC;IACpC,MAAME,OAAO,GAAGD,OAAO,CAACE,IAAI,EAAE;IAC9B;IACA,OAAOD,OAAO;EAClB;EAEAnB,SAAS,CAAC,MAAM;IACZO,kBAAkB,CAACG,IAAI,EAAE,MAAOW,cAAc,IAAK;MAC/C,IAAGA,cAAc,EAAE;QACf,MAAMC,QAAQ,GAAGD,cAAc,CAACL,KAAK;QACrC,MAAMO,KAAK,GAAG,MAAMR,OAAO,CAACO,QAAQ,CAAC;QACrCE,UAAU,CAAE,YAAW;UACnBC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;UACtBb,WAAW,CAAC,MAAME,OAAO,CAACO,QAAQ,CAAC,CAACK,IAAI,CAAEC,CAAC,IAAK;YAAC,OAAQA,CAAC,CAACC,QAAQ;UAAC,CAAC,CAAC,CAACC,KAAK,CAAEC,KAAK,IAAK;YAACN,OAAO,CAACC,GAAG,CAACK,KAAK,CAAC;UAAA,CAAC,CAAC,CAAC;QAClH,CAAC,EAAE,GAAG,CAAC;QACPlB,WAAW,CAACU,KAAK,CAACM,QAAQ,CAAC;MAG/B;IACJ,CAAC,CAAC;EACN,CAAC,CAAC;EAEF,IAAGf,IAAI,EAAE;IACT,oBACI;MAAA,wBACA;QAAQ,SAAS,EAAC,YAAY;QAAA,yBAAYF,QAAQ;MAAA;QAAA;QAAA;QAAA;MAAA,QAAU,eAC5D;QAAQ,SAAS,EAAC,aAAa;QAAC,OAAO,EAAE,MAAMF,IAAI,CAACF,OAAO,EAAG;QAAA,uBAAC,QAAC,OAAO;UAAC,EAAE,EAAC,GAAG;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAmB;QAAA;QAAA;QAAA;MAAA,QAAS;IAAA;MAAA;MAAA;MAAA;IAAA,QACpG;EAEV,CAAC,MAAM;IACP,oBACI;MAAQ,SAAS,EAAC,YAAY;MAAA,6BAAE,QAAC,OAAO;QAAC,EAAE,EAAC,QAAQ;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAiB;IAAA;MAAA;MAAA;MAAA;IAAA,QAAU;EAEnF;AACJ;AAAC,GAzCeG,WAAW;EAAA,QAGRF,YAAY;AAAA;AAAA,KAHfE,WAAW;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}